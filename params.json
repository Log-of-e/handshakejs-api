{"name":"Handshake","tagline":"API platform for authenticating users without requiring a password.","body":"# [Handshake](https://handshakejs.herokuapp.com) API Documentation\r\n\r\n![](https://rawgithub.com/scottmotte/handshake-js/master/handshakejs.svg)\r\n\r\n**API platform for authenticating users without requiring a password.**\r\n\r\n## Installation\r\n\r\n### Heroku\r\n\r\n```bash\r\ngit clone https://github.com/scottmotte/handshake.git\r\ncd handshake\r\nheroku create handshakejs\r\nheroku addons:add sendgrid\r\nheroku addons:add redistogo\r\ngit push heroku master\r\nheroku config:set FROM=login@yourapp.com\r\n```\r\n\r\nNext, create your first app.\r\n\r\n```bash\r\ncurl -X POST https://handshakejs.herokuapp.com/api/v0/apps/create.json \\\r\n-d \"email=you@email.com\" \\\r\n-d \"app_name=your_app_name\"\r\n```\r\n\r\nNice, that's all it takes to get your authentication system running. Now let's plug that into our app using the embeddable JavaScript.\r\n\r\nPlace a script tag wherever you want the login form displayed.  \r\n\r\n```html\r\n<script src='/path/to/handshake.js' \r\n        data-app_name=\"your_app_name\" \r\n        data-root_url=\"https://handshakejs.herokuapp.com\"></script>\r\n```\r\n\r\nGet the latest [handshake.js here](https://github.com/scottmotte/handshake-js/blob/master/build/handshake.js). Replace the `data-app_name` with your own.\r\n\r\nNext, bind to the handshake:login_confirm event to get the successful login data. This is where you would make an internal request to your application to set the session for the user.\r\n\r\n```html\r\n<script>\r\n  handshake.script.addEventListener('handshake:login_confirm', function(e) {\r\n    console.log(e.data);\r\n    $.post(\"/login/success\", {email: e.data.identity.email}, function(data) {\r\n      window.location.href = \"/dashboard\";\r\n    });    \r\n  }, false); \r\n</script>\r\n```\r\n\r\nThen you'd setup a route in your app at /login/success to do something like this (setting the session). Here's an example in ruby and there is also a [full example ruby app](https://github.com/scottmotte/handshake-example-ruby).\r\n\r\n```ruby\r\n  post \"/login/success\" do\r\n    session[:user] = params[:email]\r\n    redirect \"/dashboard\"\r\n  end\r\n```\r\n\r\n## API Overview\r\n\r\nThe [handshakejs.herokuapp.com](https://handshakejs.herokuapp.com) API is based around REST. It uses standard HTTP authentication. [JSON](https://www.json.org/) is returned in all responses from the API, including errors.\r\n\r\nI've tried to make it as easy to use as possible, but if you have any feedback please [let me know](mailto:scott@scottmotte.com).\r\n\r\n* [Summary](#summary)\r\n* [Apps](#apps)\r\n* [Login](#login)\r\n\r\n## Summary\r\n\r\n### API Endpoint\r\n\r\n* https://handshakejs.herokuapp.com/api/v0\r\n\r\n## Apps\r\n\r\nTo start using the handshake API, you must first create an app.\r\n\r\n### POST /apps/create\r\n\r\nPass an email and app_name to create your app at handshakejs.herokuapp.com.\r\n\r\n#### Definition\r\n\r\n```bash\r\nPOST https://handshakejs.herokuapp.com/api/v0/apps/create.json\r\n```\r\n\r\n#### Required Parameters\r\n\r\n* email\r\n* app_name\r\n\r\n#### Example Request\r\n\r\n```bash\r\ncurl -X POST https://handshakejs.herokuapp.com/api/v0/apps/create.json \\\r\n-d \"email=test@example.com\" \\\r\n-d \"app_name=myapp\"\r\n```\r\n\r\n#### Example Response\r\n```javascript\r\n{\r\n  success: true,\r\n  app: {\r\n    email: \"test@example.com\",\r\n    app_name: \"myapp\"\r\n  }\r\n}\r\n```\r\n\r\n## Logins\r\n\r\n### POST /login/request\r\n\r\nRequest a login.\r\n\r\n#### Definition\r\n\r\n```bash\r\nPOST https://handshakejs.herokuapp.com/api/v0/login/request.json\r\n```\r\n\r\n#### Required Parameters\r\n\r\n* email\r\n* app_name\r\n\r\n#### Example Request\r\n\r\n```bash\r\ncurl -X POST https://handshakejs.herokuapp.com/api/v0/login/request.json \\ \r\n-d \"email=test@example.com\" \\\r\n-d \"app_name=your_app_name\"\r\n```\r\n\r\n#### Example Response\r\n```javascript\r\n{\r\n  success: true,\r\n  identity: {\r\n    email: \"test@example.com\",\r\n    app_name: \"your_app_name\",\r\n    authcode_expired_at: \"1382833591309\"\r\n  }\r\n}\r\n```\r\n\r\n### POST /login/confirm\r\n\r\nConfirm a login. Email and authcode must match to get a success response back. \r\n\r\n#### Definition\r\n\r\n```bash\r\nPOST https://handshakejs.herokuapp.com/api/v0/login/confirm.json\r\n```\r\n\r\n#### Required Parameters\r\n\r\n* email\r\n* authcode\r\n* app_name\r\n\r\n#### Example Request\r\n\r\n```bash\r\ncurl -X POST https://handshakejs.herokuapp.com/api/v0/login/confirm.json \\\r\n-d \"email=test@example.com\" \\\r\n-d \"authcode=7389\" \\ \r\n-d \"app_name=your_app_name\"\r\n```\r\n\r\n#### Example Response\r\n```javascript\r\n{\r\n  success: true,\r\n  identity: {\r\n    email: \"test@example.com\",\r\n    app_name: \"your_app_name\",\r\n    authcode: \"7389\"\r\n  }\r\n}\r\n```\r\n\r\n## Database Schema with Redis\r\n\r\napps - collection of keys with all the app_names in there. SADD\r\n\r\napps/myappname - hash with all the data in there. HSET or HMSET\r\n\r\napps/theappname/identities - collection of keys with all the identities' emails in there. SADD\r\n\r\napps/theappname/identities/emailaddress HSET or HMSET\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}